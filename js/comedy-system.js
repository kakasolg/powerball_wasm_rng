/**
 * 🎭 Comedy System - Quantum Physics Humor Engine
 * Powerball Superposition - Making waiting fun with quantum comedy
 */

class ComedySystem {
    constructor() {
        this.currentJoke = null;
        this.jokeHistory = [];
        this.comedyMode = 'quantum';
        this.humorLevel = 'maximum';
        
        console.log('🎭 Comedy System initializing...');
        console.log('😂 Loading quantum humor database...');
        this.initializeComedyEngine();
    }

    /**
     * Initialize the comedy engine
     */
    initializeComedyEngine() {
        console.log('🎪 Comedy engine online!');
        console.log('🤡 Humor processors at maximum capacity');
        console.log('🎭 Ready to make quantum mechanics funny!');
    }

    /**
     * Physics-themed loading messages
     */
    getPhysicsMessages() {
        return [
            "🔬 Qubits are entangled... untangling in progress...",
            "⚛️ Heisenberg Uncertainty Principle causing delays",
            "🌀 Numbers quantum tunneled to another dimension. Retrieving...",
            "📡 Waiting for Schrödinger's cat to open the box...",
            "🎭 Scanning 2,847 parallel universes for optimal numbers",
            "🤔 Einstein said 'God doesn't play dice,' so we're rolling them ourselves",
            "⚡ Quantum coherence at 47.3%... recalibrating...",
            "🧲 Magnetic field interfering with quantum flux capacitor",
            "🌌 Checking if numbers exist in this reality...",
            "�� Charging quantum batteries with cosmic rays...",
            "📐 Calculating exact position of uncertainty...",
            "🎯 Numbers are practicing social distancing in quantum space",
            "🔬 Laboratory cat escaped! Searching for Schrödinger...",
            "⚛️ Quantum computer having existential crisis",
            "🌀 Wave function collapsed! Rebuilding reality...",
            "🎪 Quantum circus in town - numbers performing tricks",
            "🧠 Teaching AI the meaning of 'maybe'",
            "📡 Downloading update from parallel universe",
            "⚡ Lightning struck the quantum server. Again.",
            "🎨 Painting numbers with quantum brushes..."
        ];
    }

    /**
     * Tech-themed loading messages
     */
    getTechMessages() {
        return [
            "💾 Downloading more RAM for quantum computer...",
            "🖥️ Physics engine crashed. Turn reality off and on?",
            "📱 Quantum update downloading... iOS 47.3.1",
            "🔌 Quantum computer unplugged. Grandma strikes again!",
            "⌨️ Ctrl+Z doesn't work on quantum mechanics",
            "🖱️ Have you tried turning the universe off and on again?",
            "💿 Installing Quantum OS 2.0... Please wait 14 billion years",
            "🔧 404: Reality not found",
            "💻 Quantum computer caught Monday Blues...",
            "📟 Y2K bug affected quantum timeline",
            "⚙️ Calibrating flux capacitor with rubber duck",
            "🔋 Battery at 1%. Universe shutting down...",
            "📺 No signal from dimension #42",
            "🎮 Achievement unlocked: Quantum Confusion",
            "💾 Saving universe... Do not power off!",
            "🖥️ Blue Screen of Quantum Death detected",
            "📱 Quantum hotspot password: 'uncertainty123'",
            "⌨️ Keyboard not found. Press F1 to continue.",
            "🔍 Searching for meaning in quantum noise...",
            "💾 Memory leak in space-time continuum"
        ];
    }

    /**
     * Corporate/Business parody messages
     */
    getCorporateMessages() {
        return [
            "📊 Quantum Computing as a Service (QCaaS) loading...",
            "🤖 Machine Learning the uncertainty principle...",
            "⛓️ Blockchain-verified quantum randomness processing...",
            "🚀 Disrupting lottery industry with quantum synergy...",
            "📈 Optimizing ROI on quantum investment portfolios",
            "💼 Scheduling meeting with quantum stakeholders",
            "📋 Agile quantum development in progress...",
            "🎯 Pivoting quantum strategy for better user engagement",
            "📊 A/B testing reality vs simulation",
            "💡 Ideating quantum solutions for legacy entropy",
            "🔄 Iterating on quantum-first design thinking",
            "📱 Building quantum-native mobile experience",
            "☁️ Migrating consciousness to quantum cloud",
            "🎨 Design sprint for quantum user experience",
            "📈 Scaling quantum operations for enterprise",
            "🤝 Quantum partnership integration ongoing",
            "💎 Premium quantum features require subscription",
            "🎪 Quantum customer journey optimization",
            "📋 Sprint retrospective with quantum team",
            "🚀 Quantum minimum viable product launching"
        ];
    }

    /**
     * Pop culture and meme references
     */
    getPopCultureMessages() {
        return [
            "🎵 Never gonna give you up, never gonna let you down (quantum edition)",
            "🐱 Much quantum, very random, wow!",
            "👾 The cake is a quantum lie",
            "🎮 It's dangerous to go alone! Take this quantum number.",
            "🎭 To be or not to be... quantum superposition decided both",
            "🦄 Quantum unicorns are 50% more magical than regular unicorns",
            "🍕 Quantum pizza: simultaneously eaten and not eaten",
            "🎬 Directed by: Christopher Quantum",
            "🎪 Welcome to the quantum show where logic comes to die",
            "🧙‍♂️ You're a quantum wizard, Harry!",
            "🎯 May the quantum force be with you",
            "🎨 Quantum art: simultaneously beautiful and terrible",
            "🎵 All we are is dust in the quantum wind...",
            "🏰 In a quantum galaxy far, far away...",
            "🎭 Quantum Shakespeare: To compute or not to compute",
            "🎮 Player 2 entered the quantum game",
            "🎪 Ladies and gentlemen, welcome to Quantum Park!",
            "👑 I am inevitable... in all quantum states",
            "🎬 Quantum movie spoiler: Everyone dies AND lives",
            "🎵 Hello quantum, my old friend..."
        ];
    }

    /**
     * Self-referential and meta humor
     */
    getMetaMessages() {
        return [
            "🤔 Loading humor algorithm... humor level critical",
            "😂 Joke database corrupted. Defaulting to dad jokes.",
            "🎭 Comedy.exe has stopped working",
            "😅 Warning: Excessive puns detected in humor module",
            "🃏 Shuffling deck of quantum jokes...",
            "😄 Humor probability: 42.69%",
            "🎪 Installing comedy expansion pack...",
            "😂 Laughter buffer overflow detected",
            "🎭 Comedy timing algorithm needs calibration",
            "😅 Sarcasm.dll not found. Sincere mode activated.",
            "🤡 Clown college certification required",
            "😄 Joke quality control: FAILED",
            "🎪 Comedy central server unreachable",
            "😂 Humor cache cleared. Reloading funny...",
            "🎭 Breaking the fourth wall... wall repaired",
            "😅 Meta-humor recursion limit exceeded",
            "🤔 Explaining joke... humor value decreased by 73%",
            "😄 Comedy gold transmuted to comedy lead",
            "🎪 Circus left town. Clowns still here.",
            "😂 This message is funnier in parallel universe #5"
        ];
    }

    /**
     * Random message generator with weighted categories
     */
    getRandomMessage() {
        const categories = {
            physics: { weight: 30, messages: this.getPhysicsMessages() },
            tech: { weight: 25, messages: this.getTechMessages() },
            corporate: { weight: 20, messages: this.getCorporateMessages() },
            popculture: { weight: 15, messages: this.getPopCultureMessages() },
            meta: { weight: 10, messages: this.getMetaMessages() }
        };

        // Weighted random selection
        const totalWeight = Object.values(categories).reduce((sum, cat) => sum + cat.weight, 0);
        let random = Math.random() * totalWeight;
        
        for (const [category, data] of Object.entries(categories)) {
            random -= data.weight;
            if (random <= 0) {
                const messages = data.messages;
                const message = messages[Math.floor(Math.random() * messages.length)];
                console.log(`🎭 Selected ${category} comedy: ${message}`);
                return message;
            }
        }
        
        // Fallback
        return "⚛️ Quantum randomness achieved maximum entropy";
    }

    /**
     * Get a random comedy message with history tracking
     */
    getComedyMessage() {
        let message = this.getRandomMessage();
        let attempts = 0;
        const maxAttempts = 10;
        
        // Avoid repeating recent jokes
        while (this.jokeHistory.includes(message) && attempts < maxAttempts) {
            message = this.getRandomMessage();
            attempts++;
        }
        
        // Update history
        this.jokeHistory.push(message);
        if (this.jokeHistory.length > 20) {
            this.jokeHistory.shift(); // Keep only last 20 jokes
        }
        
        this.currentJoke = message;
        return message;
    }

    /**
     * Start comedy rotation for loading screens
     */
    startComedyRotation(updateCallback, interval = 3000) {
        if (this.comedyInterval) {
            clearInterval(this.comedyInterval);
        }
        
        // Initial message
        updateCallback(this.getComedyMessage());
        
        // Set up rotation
        this.comedyInterval = setInterval(() => {
            updateCallback(this.getComedyMessage());
        }, interval);
        
        console.log('🎪 Comedy rotation started!');
    }

    /**
     * Stop comedy rotation
     */
    stopComedyRotation() {
        if (this.comedyInterval) {
            clearInterval(this.comedyInterval);
            this.comedyInterval = null;
            console.log('🎭 Comedy rotation stopped.');
        }
    }

    /**
     * Set comedy mode
     */
    setComedyMode(mode) {
        const validModes = ['quantum', 'tech', 'corporate', 'random', 'meta'];
        if (validModes.includes(mode)) {
            this.comedyMode = mode;
            console.log(`🎭 Comedy mode set to: ${mode}`);
        } else {
            console.warn(`🚫 Invalid comedy mode: ${mode}`);
        }
    }

    /**
     * Get current joke statistics
     */
    getStats() {
        return {
            currentJoke: this.currentJoke,
            jokeHistoryLength: this.jokeHistory.length,
            comedyMode: this.comedyMode,
            humorLevel: this.humorLevel,
            totalJokeCategories: 5,
            isActive: !!this.comedyInterval
        };
    }

    /**
     * Emergency humor deployment
     */
    emergencyHumor() {
        const emergencyJokes = [
            "🚨 EMERGENCY HUMOR ACTIVATED: Why don't quantum computers ever crash? Because they're always in superposition!",
            "⚡ QUICK FUNNY: A quantum computer walks into a bar... and doesn't.",
            "🎪 INSTANT COMEDY: Schrödinger's deadline - it's both met and missed until observed!",
            "😂 HUMOR BOMB: Why did the photon check its bags? Because it was traveling light!",
            "🎭 COMEDY OVERRIDE: Quantum mechanics: when physics gets commitment issues!"
        ];
        
        return emergencyJokes[Math.floor(Math.random() * emergencyJokes.length)];
    }
}

// Initialize global comedy system
window.ComedySystem = ComedySystem;

// Auto-initialize if in browser environment
if (typeof document !== 'undefined') {
    window.quantumComedy = new ComedySystem();
    console.log('🎪 Global quantum comedy system ready!');
}

console.log('🎭 Comedy System module loaded successfully!');